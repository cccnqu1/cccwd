<html>
<head>
  <meta charset="utf-8" />
</head>
<body>
<script src="../../gospa.js"></script>
<title> 陳鍾誠  / 教科書  / 資料庫 / MongoDB -- 進階操作</title>

 [[陳鍾誠]](ccc:home)  / [[教科書]](book:home)  / [[資料庫]](db:home) 

<h1 id="mongodb">MongoDB -- 進階操作</h1>

<h2 id="mydb">連接開啟 mydb 資料庫</h2>

<pre><code class="javascript">D:\db&gt;mongo mydb
MongoDB shell version: 3.0.2
connecting to: mydb
</code></pre>

<h2 id="">新增三筆資料</h2>

<pre><code class="javascript">&gt; db.users.insert({name:"ccc", age:45, password:"321"})
WriteResult({ "nInserted" : 1 })
&gt; db.users.insert({name:"snoopy", age:5, password:"snoopy123"})
WriteResult({ "nInserted" : 1 })
&gt; db.users.insert({name:"garfield", age:9, password:"garfield123"})
WriteResult({ "nInserted" : 1 })
&gt; db.users.find()
{ "_id" : ObjectId("55487ecd3c69cbdeba209fb3"), "name" : "ccc", "age" : 45, "password" : "321" }
{ "_id" : ObjectId("55487ede3c69cbdeba209fb4"), "name" : "snoopy", "age" : 5, "password" : "snoopy123" }
{ "_id" : ObjectId("55487eed3c69cbdeba209fb5"), "name" : "garfield", "age" : 9,"password" : "garfield123" }
</code></pre>

<h2 id="">條件式查詢</h2>

<p>參考： <a href="http://www.w3cschool.cc/mongodb/mongodb-operators.html">http://www.w3cschool.cc/mongodb/mongodb-operators.html</a></p>

<pre><code class="javascript">&gt; db.users.find({age :{$gt : 8}})
{ "_id" : ObjectId("55487ecd3c69cbdeba209fb3"), "name" : "ccc", "age" : 45, "password" : "321" }
{ "_id" : ObjectId("55487eed3c69cbdeba209fb5"), "name" : "garfield", "age" : 9,"password" : "garfield123" }
&gt; db.users.find()
{ "_id" : ObjectId("55487ecd3c69cbdeba209fb3"), "name" : "ccc", "age" : 45, "password" : "321" }
{ "_id" : ObjectId("55487ede3c69cbdeba209fb4"), "name" : "snoopy", "age" : 5, "password" : "snoopy123" }
{ "_id" : ObjectId("55487eed3c69cbdeba209fb5"), "name" : "garfield", "age" : 9, "password" : "garfield123" }
&gt; db.users.find().limit(2)
{ "_id" : ObjectId("55487ecd3c69cbdeba209fb3"), "name" : "ccc", "age" : 45, "password" : "321" }
{ "_id" : ObjectId("55487ede3c69cbdeba209fb4"), "name" : "snoopy", "age" : 5, "password" : "snoopy123" }
&gt; db.users.find().limit(2).skip(1)
{ "_id" : ObjectId("55487ede3c69cbdeba209fb4"), "name" : "snoopy", "age" : 5, "password" : "snoopy123" }
{ "_id" : ObjectId("55487eed3c69cbdeba209fb5"), "name" : "garfield", "age" : 9,"password" : "garfield123" }
</code></pre>

<h2 id="">排序與索引</h2>

<pre><code class="javascript">&gt; db.users.find().sort({age:1})
{ "_id" : ObjectId("55487ede3c69cbdeba209fb4"), "name" : "snoopy", "age" : 5, "password" : "snoopy123" }
{ "_id" : ObjectId("55487eed3c69cbdeba209fb5"), "name" : "garfield", "age" : 9,"password" : "garfield123" }
{ "_id" : ObjectId("55487ecd3c69cbdeba209fb3"), "name" : "ccc", "age" : 45, "password" : "321" }
&gt; db.users.find().sort({age:-1})
{ "_id" : ObjectId("55487ecd3c69cbdeba209fb3"), "name" : "ccc", "age" : 45, "password" : "321" }
{ "_id" : ObjectId("55487eed3c69cbdeba209fb5"), "name" : "garfield", "age" : 9,"password" : "garfield123" }
{ "_id" : ObjectId("55487ede3c69cbdeba209fb4"), "name" : "snoopy", "age" : 5, "password" : "snoopy123" }
&gt; db.users.ensureIndex({name:1})
{
        "createdCollectionAutomatically" : false,
        "numIndexesBefore" : 1,
        "numIndexesAfter" : 2,
        "ok" : 1
}
</code></pre>

<h2 id="">離開</h2>

<pre><code class="javascript">&gt; quit()

D:\db&gt;
</code></pre>

</body>
</html>