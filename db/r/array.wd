# 陣列與向量

## 向量

```R
> x = c(1,2,3,4,5)
> print(x)
[1] 1 2 3 4 5
> x
[1] 1 2 3 4 5
> x1 <- c(1,2,3)
> x1
[1] 1 2 3
> x2 <- 1:5
> x2
[1] 1 2 3 4 5
> x3 = seq(1,5,1)
> x3
[1] 1 2 3 4 5
> x4 = seq(1,10,2)
> x4
[1] 1 3 5 7 9
> y = 6:10
> x
[1] 1 2 3 4 5
> z = c(x,y)
> z
 [1]  1  2  3  4  5  6  7  8  9 10
> 
> x
[1] 1 2 3 4 5
> x+1
[1] 2 3 4 5 6
> x*2
[1]  2  4  6  8 10
> x/2
[1] 0.5 1.0 1.5 2.0 2.5
> x+y
[1]  7  9 11 13 15
> length(x)
[1] 5
> x - y
[1] -5 -5 -5 -5 -5
> x*y
[1]  6 14 24 36 50
> x/y
[1] 0.1666667 0.2857143 0.3750000 0.4444444 0.5000000
> log(x)
[1] 0.0000000 0.6931472 1.0986123 1.3862944 1.6094379
> ?log
starting httpd help server ... done
> sqrt(x)
[1] 1.000000 1.414214 1.732051 2.000000 2.236068
> exp(x)
[1]   2.718282   7.389056  20.085537  54.598150 148.413159
> 
```

## 有序數列

```R
> 1:7
[1] 1 2 3 4 5 6 7
> x = 3:8
> x
[1] 3 4 5 6 7 8
> 1.3:6
[1] 1.3 2.3 3.3 4.3 5.3
> c(1.3:6, 100:4)
  [1]   1.3   2.3   3.3   4.3   5.3 100.0  99.0  98.0   
97.0  96.0  95.0  94.0
 [13]  93.0  92.0  91.0  90.0  89.0  88.0  87.0  86.0   
85.0  84.0  83.0  82.0
 [25]  81.0  80.0  79.0  78.0  77.0  76.0  75.0  74.0   
73.0  72.0  71.0  70.0
 [37]  69.0  68.0  67.0  66.0  65.0  64.0  63.0  62.0   
61.0  60.0  59.0  58.0
 [49]  57.0  56.0  55.0  54.0  53.0  52.0  51.0  50.0   
49.0  48.0  47.0  46.0
 [61]  45.0  44.0  43.0  42.0  41.0  40.0  39.0  38.0   
37.0  36.0  35.0  34.0
 [73]  33.0  32.0  31.0  30.0  29.0  28.0  27.0  26.0   
25.0  24.0  23.0  22.0
 [85]  21.0  20.0  19.0  18.0  17.0  16.0  15.0  14.0   
13.0  12.0  11.0  10.0
 [97]   9.0   8.0   7.0   6.0   5.0   4.0
> c(1.3:6, 10:4)
 [1]  1.3  2.3  3.3  4.3  5.3 10.0  9.0  8.0  7.0  6.0   
5.0  4.0
> 10:4
[1] 10  9  8  7  6  5  4
> 10.1:4
[1] 10.1  9.1  8.1  7.1  6.1  5.1  4.1
> 3.8:5
[1] 3.8 4.8
> 3.7:10
[1] 3.7 4.7 5.7 6.7 7.7 8.7 9.7
> prod(4:9)
[1] 60480
> prod(1:3)
[1] 6
> prod(1:5)
[1] 120
> seq(1,5)
[1] 1 2 3 4 5
> seq(2,8, by=0.5)
 [1] 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5 7.0 7.5 8.0
> seq(3,9, by=0.3)
 [1] 3.0 3.3 3.6 3.9 4.2 4.5 4.8 5.1 5.4 5.7 6.0 6.3 6.6  
6.9 7.2 7.5 7.8 8.1
[19] 8.4 8.7 9.0
> seq(3,9, length=10)
 [1] 3.000000 3.666667 4.333333 5.000000 5.666667 6.333333  
7.000000 7.666667
 [9] 8.333333 9.000000
> rep(7,5)
[1] 7 7 7 7 7
> rep(c("A","B","C"), 3)
[1] "A" "B" "C" "A" "B" "C" "A" "B" "C"
> rep(3:8, times=3, each=4)
 [1] 3 3 3 3 4 4 4 4 5 5 5 5 6 6 6 6 7 7 7 7 8 8 8 8 3 3 3  
3 4 4 4 4 5 5 5 5
[37] 6 6 6 6 7 7 7 7 8 8 8 8 3 3 3 3 4 4 4 4 5 5 5 5 6 6 6  
6 7 7 7 7 8 8 8 8
> rep(3:8, each=3, length=36)
 [1] 3 3 3 4 4 4 5 5 5 6 6 6 7 7 7 8 8 8 3 3 3 4 4 4 5 5 5  
6 6 6 7 7 7 8 8 8

```

## 矩陣

### 範例一

```R
> d <- seq(1,25,1)
> matrix(d, nrow=5, ncol=5, byrow=T)
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    6    7    8    9   10
[3,]   11   12   13   14   15
[4,]   16   17   18   19   20
[5,]   21   22   23   24   25
> d
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14
[15] 15 16 17 18 19 20 21 22 23 24 25
> m = matrix(d, nrow=5, ncol=5, byrow=T)
> m
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    6    7    8    9   10
[3,]   11   12   13   14   15
[4,]   16   17   18   19   20
[5,]   21   22   23   24   25
> m[1,]
[1] 1 2 3 4 5
> m[2,2]
[1] 7
> m[2,1:5]
[1]  6  7  8  9 10
> m[1:5, 2]
[1]  2  7 12 17 22
> m[2, c(1,3,5)]
[1]  6  8 10
> m[c(1,3,5), 2]
[1]  2 12 22
> m[2, -c(1,3,5)]
[1] 7 9
> 

```

### 範例二

```r
> x = c(1,2,3,4,5,6)
> attr(x, "dim")<-c(2,3)
> x
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
> 
> y = c(1,2,3,4)
> dim(y) = c(2,2) # 矩陣其實是二維陣列，向量只有在
> y
     [,1] [,2]
[1,]    1    3
[2,]    2    4
> 

````

### 範例三

```R
> x <- array(1:20, dim=c(4,5)) 
> x
[,1] [,2] [,3] [,4] [,5]
[1,] 1 5 9 13 17
[2,] 2 6 10 14 18
[3,] 3 7 11 15 19
[4,] 4 8 12 16 20
> i <- array(c(1:3,3:1), dim=c(3,2))
> i 
[,1] [,2]
[1,] 1 3
[2,] 2 2
[3,] 3 1
> x[i] 
[1] 9 6 3
> x[i] <- 0 
> x
[,1] [,2] [,3] [,4] [,5]
[1,] 1 5 0 13 17
[2,] 2 0 10 14 18
[3,] 0 7 11 15 19
[4,] 4 8 12 16 20
>
```

### 範例四：

```R
> matrix(rep(3,8), nrow=4)
     [,1] [,2]
[1,]    3    3
[2,]    3    3
[3,]    3    3
[4,]    3    3
> matrix(3, nrow=4, ncol=3)
     [,1] [,2] [,3]
[1,]    3    3    3
[2,]    3    3    3
[3,]    3    3    3
[4,]    3    3    3

> w=matrix(0, nrow=3, ncol=4)
> w
     [,1] [,2] [,3] [,4]
[1,]    0    0    0    0
[2,]    0    0    0    0
[3,]    0    0    0    0
> w[2,3]=5
> w
     [,1] [,2] [,3] [,4]
[1,]    0    0    0    0
[2,]    0    0    5    0
[3,]    0    0    0    0
>
> x=matrix(1:12, nrow=3, ncol=4)
> x
     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12
> dim(x)
[1] 3 4
> y = 1:12
> y %*% x
錯誤在y %*% x : 非調和引數
> y = 1:3
> y %*% x
     [,1] [,2] [,3] [,4]
[1,]   14   32   50   68
> t(x)
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6
[3,]    7    8    9
[4,]   10   11   12
> diag(c(3,7,2))
     [,1] [,2] [,3]
[1,]    3    0    0
[2,]    0    7    0
[3,]    0    0    2
> diag(x)
[1] 1 5 9
> det(x)
錯誤在determinant.matrix(x, logarithm = TRUE, ...) : 
  'x' must be a square matrix
> z = matrix(1:9, nrow=3, ncol=3)
> det(z)
[1] 0
> z
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> z[2,1]=10
> z
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]   10    5    8
[3,]    3    6    9
> det(z)
[1] 48
> eigen(z)
$values
[1] 17.936765+0.000000i -1.468383+0.721055i -1.468383-0.721055i

$vectors
             [,1]                  [,2]                  [,3]
[1,] 0.4100596+0i  0.2162169-0.1118877i  0.2162169+0.1118877i
[2,] 0.6875542+0i -0.8668747+0.0000000i -0.8668747+0.0000000i
[3,] 0.5992665+0i  0.4306386+0.0617265i  0.4306386-0.0617265i

> x
     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12
> rownames(x) = paste("r", 1:3, sep="_")
> x
    [,1] [,2] [,3] [,4]
r_1    1    4    7   10
r_2    2    5    8   11
r_3    3    6    9   12
> colnames(x) = paste("c", 1:4, sep="")
> x
    c1 c2 c3 c4
r_1  1  4  7 10
r_2  2  5  8 11
r_3  3  6  9 12
>

```

## 三維陣列 

```R
> x = array(1:8, dim=c(2,2,2))
> x
, , 1

     [,1] [,2]
[1,]    1    3
[2,]    2    4

, , 2

     [,1] [,2]
[1,]    5    7
[2,]    6    8

> x[1,2,1]
[1] 3
> rownames(x) = c("r1", "r2")
> x
, , 1

   [,1] [,2]
r1    1    3
r2    2    4

, , 2

   [,1] [,2]
r1    5    7
r2    6    8

> colnames(x) = c("c1", "c2")
> x
, , 1

   c1 c2
r1  1  3
r2  2  4

, , 2

   c1 c2
r1  5  7
r2  6  8

> dimnames(x)
[[1]]
[1] "r1" "r2"

[[2]]
[1] "c1" "c2"

[[3]]
NULL

> dimnames(x)[[3]] = c("k1", "k2")
> x
, , k1

   c1 c2
r1  1  3
r2  2  4

, , k2

   c1 c2
r1  5  7
r2  6  8

>

```

## 相關套件
* Matrix -- <http://cran.r-project.org/web/packages/Matrix/index.html>
* 稀疏矩陣 -- <http://cran.r-project.org/web/packages/SparseM/index.html>